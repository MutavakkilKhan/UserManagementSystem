# User Access Management System

## Overview
A full-stack application for managing user access to software, with role-based dashboards for Admin, Manager, and Employee. Built with Node.js, Express, TypeORM, PostgreSQL, and React.

---

## Features
- **Node.js + Express backend**
  - TypeORM entities for User, Software, AccessRequest
  - JWT authentication and role-based middleware
  - Secure password hashing with bcrypt
- **React frontend**
  - Auth pages (login, register)
  - Role-based dashboards (admin, manager, user)
- **PostgreSQL database**
  - Auto-generated schema from TypeORM entities
- **API endpoints**
  - For user management, software management, and access requests

---

## Setup Instructions

### 1. Clone the repository
```bash
git clone <your-repo-url>
cd <your-repo-folder>
```

### 2. Backend Setup
```bash
cd backend
npm install
```

- Create a `.env` file in the `backend` folder:
```
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=yourpassword
DB_DATABASE=uam_system
JWT_SECRET=your_jwt_secret
JWT_EXPIRES_IN=24h
ADMIN_EMAIL=youradmin@gmail.com
ADMIN_NAME=Admin
ADMIN_PASSWORD=admin123
MANAGER_EMAIL=yourmanager@gmail.com
MANAGER_NAME=Manager
MANAGER_PASSWORD=manager123
```
- Start the backend:
```bash
npm run dev
```

### 3. Frontend Setup
```bash
cd ../frontend
npm install
npm run dev
```
- The frontend will run on [http://localhost:5173](http://localhost:5173)

### 4. Database
- PostgreSQL must be running and accessible with the credentials in your `.env`.
- The schema is auto-generated by TypeORM (`synchronize: true`).

---

## API Documentation

### **Auth**
- `POST /api/users/register` — Register new user (default role: user)
- `POST /api/users/login` — Login, returns JWT
- `GET /api/users/me` — Get current user info (requires JWT)

### **Software Management (Admin)**
- `POST /api/software` — Create new software (admin only)
  - Body: `{ name, description, accessLevels: ["read", "write", "admin"] }`
- `GET /api/software` — List all software

### **Access Requests (Employee)**
- `POST /api/access-request` — Request access to software
  - Body: `{ softwareId, accessType, reason }`

### **Request Approval (Manager)**
- `GET /api/access-request` — List all access requests (manager only)
- `PATCH /api/access-request/:id` — Approve or reject request
  - Body: `{ status: "approved" | "rejected" }`

---

## Database Schema (TypeORM Entities)

### **User**
- `id: number`
- `name: string`
- `email: string` (unique)
- `password: string`
- `role: 'user' | 'manager' | 'admin'`

### **Software**
- `id: number`
- `name: string`
- `description: string`
- `accessLevels: string[]` (e.g., ["read", "write", "admin"])

### **AccessRequest**
- `id: number`
- `user: User` (ManyToOne)
- `software: Software` (ManyToOne)
- `accessType: 'read' | 'write' | 'admin'`
- `reason: string`
- `status: 'pending' | 'approved' | 'rejected'`
- `timestamp: Date`

---

## Role-Based Views
- **/login** — Login page
- **/register** — Registration page
- **/dashboard** — Employee dashboard
- **/manager** — Manager dashboard
- **/admin** — Admin dashboard

---

## Notes
- Passwords are securely hashed with bcrypt.
- JWT is used for authentication and role-based access.
- Admin and manager users are seeded on backend startup (see `.env`).
- The schema is auto-generated; for production, consider using TypeORM migrations.

---

## License
MIT 